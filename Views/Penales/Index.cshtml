@{
    ViewData["Title"] = "Lobby de Penales";
}

<div class="container text-center mt-5">
    <h2>⚽ CREA UNA SALA ⚽</h2>

    <!-- Crear sala -->
    <div class="my-3">
        <input type="text" id="txtNombreCrear" placeholder="Tu nombre" class="form-control mb-2" />
        <button class="btn btn-primary" onclick="crearSala()">Crear Sala</button>
    </div>
    <br />
    <br />

    <h2>⚽ O UNITE A UNA CON UN CÓDIGO ⚽</h2>
    <!-- Unirse a sala -->
    <div class="my-3">
        <input type="text" id="txtCodigoUnirse" placeholder="Código de sala" class="form-control mb-2" />
        <input type="text" id="txtNombreUnirse" placeholder="Tu nombre" class="form-control mb-2" />
        <button class="btn btn-secondary" onclick="unirseSala()">Unirse</button>
    </div>
</div>

<!-- Modal Sala -->
<div id="popupSala" class="modal" style="display:none; color:black; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,0.25); background-image:url('/images/stadium.jpg');
            background-size:cover;
            background-position:center;">
    <div class="modal-dialog" style="max-width:600px; margin:auto; margin-top:5vh;">
        <div class="modal-content p-4" style="border-radius:15px;">

            <!-- Sección de equipos (desaparece al iniciar partida) -->
            <div id="seccionEquipos" class="text-center">
                <h3>Código de sala: <span id="codigoSala"></span></h3>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <h4>Equipo 1</h4>
                        <ul id="equipo1" class="list-group mb-2" style="color:black"></ul>
                    </div>
                    <div class="col-md-6">
                        <h4>Equipo 2</h4>
                        <ul id="equipo2" class="list-group mb-2" style="color:black"></ul>
                    </div>
                </div>

                <button id="btnIniciar" class="btn btn-success mt-3" style="display:none;" onclick="iniciarPartida()">Iniciar Partida</button>
            </div>


            <!-- Sección de juego 3x3 (invisible hasta iniciar partida) -->
            <div id="seccionJuego" style="display:none; margin-top:20px;">
                <h4 id="turnoInfo" style="margin-bottom:10px;"></h4>
                <div id="arcoGrid" style="display:grid; grid-template-columns: repeat(3, 8rem); grid-template-rows: repeat(3, 2.5rem); grid-gap:0.3rem; justify-content:center; align-content:center; background-image:url('/images/arco2.png'); background-size:cover; background-position:center; padding:1rem; border-radius:10px;">
                    <!-- Celdas 3x3 generadas dinámicamente desde JS -->
                </div>

                <!-- Marcador -->
                <div id="marcador" style="display:flex; flex-direction:column; align-items:center; gap:0.5rem; margin:1rem 0; font-size:1rem;">

                    <div id="marcadorContainer1" style="display:flex; align-items:center; gap:0.5rem; min-height:2rem;">
                        <span style="font-weight:bold; font-size:1rem;">Equipo 1:</span>
                        <div id="marcadorEquipo1" style="display:flex; gap:0.5rem;"></div>
                    </div>

                    <div id="marcadorContainer2" style="display:flex; align-items:center; gap:0.5rem; min-height:2rem;">
                        <span style="font-weight:bold; font-size:1rem;">Equipo 2:</span>
                        <div id="marcadorEquipo2" style="display:flex; gap:0.5rem;"></div>
                    </div>

                </div>
            </div>


            <div id="contador" class="mt-3" style="font-weight:bold;"></div>

            <div id="resultadoTanda" style="display:none; text-align:center; margin-top:15px;">
                <h3 id="mensajeGanador" style="margin-bottom:10px;"></h3>
                <button id="btnVolverLobby" class="btn btn-secondary">Volver</button>
                <button id="btnRevancha" class="btn btn-primary" style="display:none;">Revancha!</button>
            </div>

        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
    <script src="~/js/penales.js"></script>
}